import postmark from 'postmark'; const token=process.env.POSTMARK_TOKEN; const from=process.env.POSTMARK_FROM||'no-reply@example.com'; const sender=process.env.SENDER_NAME||'Dentist Radar Team'; let pm=null; if(token) pm=new postmark.ServerClient(token); export async function sendEmail(to,subject,text){ if(pm){ return pm.sendEmail({ From: `${sender} <${from}>`, To: to, Subject: subject, TextBody: text }); } else { console.log('[EMAIL mock]', to, subject, text); return { mocked:true }; } } export async function sendWelcome(to){ const subject='Welcome to Dentist Radar'; const text=['Thanks for setting up an NHS dentist alert with Dentist Radar!','','What happens next:','• We check public NHS pages on a schedule (faster on Pro).','• If a nearby practice appears to be accepting new NHS patients, we email you right away.','• You should always verify and call the practice directly.','','Tips:','• Add up to 5 areas on Pro for wider coverage.','• You can create more alerts with different postcodes or change the radius.','','— Dentist Radar'].join('\n'); return sendEmail(to,subject,text); }