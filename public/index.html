<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dentist Radar — NHS Availability Alerts</title>
<meta name="description" content="Get alerts when NHS dentists near you start accepting new NHS patients. Free to try.">
<link rel="icon" href="/assets/favicon.svg">
<link rel="manifest" href="/site.webmanifest">
<link rel="stylesheet" href="/assets/normalize.css">
<link rel="stylesheet" href="/assets/theme.css">
<meta property="og:title" content="Dentist Radar — NHS Availability Alerts">
<meta property="og:description" content="Be first to know when a nearby practice starts accepting new NHS patients.">
<meta property="og:type" content="website">
<meta property="og:url" content="/">
<meta name="twitter:card" content="summary">
</head>
<body>
  <script src="/assets/config.js"></script>
  <script src="/assets/app.js"></script>

  <div class="wrap">

    <div class="card hero" role="banner">
      <div class="kv">
        <img src="/assets/logo.svg" alt="Dentist Radar" height="44" width="180" decoding="async" loading="eager">
        <span class="badge" aria-hidden="true">New</span>
      </div>
      <h1 class="center">Find NHS dentist availability — instantly</h1>
      <p class="lead center">We monitor official NHS pages and alert you when a nearby practice starts <strong>accepting new NHS patients</strong>.</p>
      <nav aria-label="Primary" class="center">
        <a href="/pricing.html" class="focus-ring">Pricing</a>
        <a href="/privacy.html" class="focus-ring">Privacy</a>
        <a href="/admin.html" class="focus-ring">Admin</a>
      </nav>
    </div>

    <div class="card section">
      <h2>Create your alert</h2>
      <p class="note">Enter your email and area(s). You’ll get an email when availability appears.</p>
      <form id="f" class="grid" aria-label="Create alert">
        <div class="full">
          <label for="email">Email</label>
          <input id="email" required name="email" placeholder="you@email.com" class="focus-ring" inputmode="email" autocomplete="email" aria-required="true"/>
        </div>
        <div class="full">
          <label for="postcode">Postcode(s)</label>
          <input id="postcode" required name="postcode" placeholder="RG41, RG1, SL6" class="focus-ring" aria-describedby="pc-note" aria-required="true"/>
          <div id="pc-note" class="note">Tip: multiple postcodes separated by commas. Free plan creates 1 area; Pro creates up to 5.</div>
        </div>
        <div>
          <label for="radius">Radius (miles)</label>
          <input id="radius" required type="number" name="radius_miles" value="10" min="1" max="30" class="focus-ring" aria-required="true"/>
        </div>
        <div class="full cta">
          <button class="btn focus-ring" type="submit">Start watching</button>
          <a class="btn btn-secondary focus-ring" href="/pricing.html" role="button">See plans</a>
        </div>
      </form>
      <div id="ok" class="success" style="display:none" role="status" aria-live="polite"></div>
      <div id="err" class="error" style="display:none" role="alert"></div>
      <div id="upsell" class="upsell" style="display:none"></div>
      <hr class="sep" aria-hidden="true">
      <div class="how" aria-label="How it works">
        <div class="step"><strong>1. Tell us your area</strong><br><span class="note">Type your email and postcode(s). We scan the public NHS pages for you.</span></div>
        <div class="step"><strong>2. We watch automatically</strong><br><span class="note">Checks run every 20 minutes (faster on Pro). We’re polite and link back to NHS.</span></div>
        <div class="step"><strong>3. You get an email</strong><br><span class="note">If a practice flips to “accepting”, we email you immediately so you can call.</span></div>
      </div>
    </div>

    <div class="card section">
      <h2>About Dentist Radar</h2>
      <p class="note">We’re an independent UK service that monitors publicly available NHS pages. When local practices appear to be accepting new NHS patients, we email you so you can verify and contact them directly. We don’t sell appointments and we never store card details — payments go through Stripe, emails via Postmark.</p>
    </div>

    <footer role="contentinfo">
      <div class="links">
        <a href="/privacy.html">Privacy</a>
        <a href="/pricing.html">Pricing</a>
        <a href="/admin.html">Admin</a>
      </div>
      <div>© 2025 Dentist Radar</div>
    </footer>

  </div>

  <div class="cookie" id="cookie" role="dialog" aria-live="polite" aria-label="Cookie Notice">
    <div>We use essential cookies to run the site. <a href="/privacy.html" style="color:#93C5FD">Learn more</a>.</div>
    <button id="cookieOk">OK</button>
  </div>

<script>
(function(){
  var form = document.getElementById('f');
  var ok = document.getElementById('ok');
  var err = document.getElementById('err');
  var upsell = document.getElementById('upsell');

  function show(el, text){ el.textContent = text; el.style.display='block'; }
  function showHTML(el, html){ el.innerHTML = html; el.style.display='block'; }
  function hideAll(){ [ok,err,upsell].forEach(function(x){ x.style.display='none'; x.textContent=''; x.innerHTML=''; }); }

  form.addEventListener('submit', function(e){
    e.preventDefault(); hideAll();
    var fd = new FormData(form);
    var body = {}; fd.forEach(function(v,k){ body[k]=v; });
    fetch(apiPath('/api/watch'), {
      method:'POST',
      headers:{'content-type':'application/json'},
      body: JSON.stringify(body)
    }).then(function(r){ return r.text(); })
    .then(function(t){
      try{
        var j = JSON.parse(t);
        if (j && j.ok){
          var n = (j.created && j.created.length) ? j.created.length : 1;
          show(ok, '✅ Alert created! ' + n + ' area(s) are now being watched. We will email you on changes.');
          form.reset();
          if (j.upgrade_needed){
            showHTML(upsell, 'You added more than your plan allows. <strong>Upgrade to Pro</strong> for up to 5 areas & faster checks. <a class="btn" href="/pricing.html" role="button" style="padding:6px 10px;margin-left:8px;">See Pro</a>');
          }
        } else {
          var msg = (j && j.error) ? j.error : (t || 'Could not create alert');
          show(err, '❌ ' + msg);
        }
      }catch(e){
        show(err, '❌ Unexpected response. Please try again.');
      }
    }).catch(function(e){
      show(err, '❌ Network error: ' + e.message);
    });
  });

  // Cookie notice
  var cookie = document.getElementById('cookie');
  if (!localStorage.getItem('dr_cookie_ok')){
    cookie.style.display='flex';
    document.getElementById('cookieOk').onclick = function(){ localStorage.setItem('dr_cookie_ok','1'); cookie.style.display='none'; };
  }
})();
</script>
</body>
</html>
